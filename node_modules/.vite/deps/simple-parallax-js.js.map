{
  "version": 3,
  "sources": ["../../simple-parallax-js/dist/react/simpleParallax.es.js"],
  "sourcesContent": ["import E, { useState as a, useRef as M, useCallback as L, useEffect as u } from \"react\";\nclass p {\n  constructor() {\n    this.callbacks = /* @__PURE__ */ new Set(), this.animationFrameId = null;\n  }\n  static getInstance() {\n    return p.instance || (p.instance = new p()), p.instance;\n  }\n  register(t) {\n    this.callbacks.add(t), this.animationFrameId === null && this.start();\n  }\n  unregister(t) {\n    this.callbacks.delete(t), this.callbacks.size === 0 && this.animationFrameId !== null && this.stop();\n  }\n  start() {\n    const t = () => {\n      this.callbacks.forEach((n) => n()), this.animationFrameId = requestAnimationFrame(t);\n    };\n    this.animationFrameId = requestAnimationFrame(t);\n  }\n  stop() {\n    this.animationFrameId !== null && (cancelAnimationFrame(this.animationFrameId), this.animationFrameId = null);\n  }\n}\nconst H = p.getInstance(), B = (e) => {\n  const [t, n] = a(0), [r, i] = a(!1), o = M(null), s = L(() => {\n    o.current && n(o.current.height);\n  }, []);\n  return u(() => {\n    const d = () => {\n      i(!0), s();\n    }, c = o.current;\n    return c && (c.complete ? d() : c.addEventListener(\"load\", d)), window.addEventListener(\"resize\", s), () => {\n      c && c.removeEventListener(\"load\", d), window.removeEventListener(\"resize\", s);\n    };\n  }, [e, s]), [o, t, r];\n}, G = (e, t) => e * t - e, O = (e, t) => Math.ceil(e / 100 * t - t / 2), W = (e, t) => {\n  const { top: n, height: r } = e, i = -r, o = t;\n  if (n < i)\n    return 0;\n  if (n > o)\n    return 100;\n  const s = (n - i) / (o - i) * 100;\n  return Math.min(Math.max(s, 0), 100);\n}, Y = (e, t) => {\n  switch (t) {\n    case \"up\":\n      return `0, ${e}px, 0`;\n    case \"right\":\n      return `${-e}px, 0, 0`;\n    case \"down\":\n      return `0, ${-e}px, 0`;\n    case \"left\":\n      return `${e}px, 0, 0`;\n    case \"up left\":\n      return `${e}px, ${e}px, 0`;\n    case \"up right\":\n      return `${-e}px, ${e}px, 0`;\n    case \"down left\":\n      return `${e}px, ${-e}px, 0`;\n    case \"down right\":\n      return `${-e}px, ${-e}px, 0`;\n    default:\n      return `0, ${e}px, 0`;\n  }\n}, D = () => {\n  const [e, t] = a(null);\n  return u(() => {\n    const n = () => {\n      t(window.innerHeight);\n    };\n    if (typeof window < \"u\")\n      return t(window.innerHeight), window.addEventListener(\"resize\", n), () => {\n        window.removeEventListener(\"resize\", n);\n      };\n  }, []), e;\n}, Q = ({\n  isLoaded: e,\n  imageHeight: t,\n  scale: n,\n  boundingClientRect: r,\n  orientation: i,\n  maxTransition: o\n}) => {\n  const [s, d] = a(0), [c, x] = a(0), [g, b] = a(\"\"), [h, I] = a(0), w = D();\n  return u(() => {\n    if (!e)\n      return;\n    const l = G(t, n);\n    d(l);\n  }, [e, t, n]), u(() => {\n    if (!e || !w || !r)\n      return;\n    let l = W(r, w);\n    o && (l = Math.min(l, 100 - o)), I(l);\n  }, [e, r, w]), u(() => {\n    const l = O(h, s);\n    x(l);\n  }, [h, s]), u(() => {\n    const l = Y(c, i);\n    b(l);\n  }, [c, i]), g;\n}, U = (e = {}) => {\n  const [t, n] = a(!1), r = M(null);\n  return u(() => {\n    const i = new IntersectionObserver(\n      (s) => {\n        const [d] = s;\n        d && (d.isIntersecting ? n(!0) : n(!1));\n      },\n      {\n        ...e\n      }\n    ), { current: o } = r;\n    return o && i.observe(o), () => {\n      o && i.unobserve(o);\n    };\n  }, [e]), [r, t];\n}, _ = () => {\n  const [e, t] = a(!1);\n  return u(() => {\n    if (typeof window > \"u\")\n      return;\n    const n = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\n    t(n.matches);\n    const r = (i) => {\n      t(i.matches);\n    };\n    return n.addEventListener(\"change\", r), () => {\n      n.removeEventListener(\"change\", r);\n    };\n  }, []), e;\n};\nvar J = \"/Users/geoffrey/Desktop/perso/simpleParallax.js/src/react/index.tsx\";\nconst X = ({\n  delay: e = 0.4,\n  orientation: t = \"up\",\n  scale: n = 1.4,\n  overflow: r = !1,\n  transition: i = \"cubic-bezier(0,0,0,1)\",\n  maxTransition: o = null,\n  children: s\n}) => {\n  var T;\n  const d = t ?? \"up\", c = n ?? 1.2, x = (T = s == null ? void 0 : s.props) == null ? void 0 : T.src, [g, b] = a(!1), [h, I] = a(0), [w, l] = a(null), [P, V] = a(\"\"), [k, v] = a(\"\"), [y, z] = a(!1), f = _(), [$, A, N] = B(x), [j, F] = U({\n    root: null,\n    rootMargin: \"0px\",\n    threshold: Array.from(Array(101).keys(), (m) => m / 100)\n  }), S = Q({\n    isLoaded: N,\n    imageHeight: A,\n    scale: c,\n    boundingClientRect: w,\n    orientation: d,\n    maxTransition: o\n  }), R = L(() => {\n    var m;\n    if (!(!F && g || f) && (window.scrollY !== h || !g)) {\n      const C = (m = $.current) == null ? void 0 : m.getBoundingClientRect();\n      C && l(C), g || (b(!0), setTimeout(() => {\n        z(!0);\n      }, 50)), I(window.scrollY);\n    }\n  }, [h, F, $, g, f]);\n  u(() => {\n    if (f) {\n      V(\"\");\n      return;\n    }\n    let m = `translate3d(${S})`;\n    r || (m += ` scale(${c})`), V(m);\n  }, [S, c, r, f]), u(() => {\n    if (!i || !e || !y || f) {\n      v(\"\");\n      return;\n    }\n    v(`transform ${e}s ${i}`);\n  }, [i, e, y, f]), u(() => (f || H.register(R), () => {\n    H.unregister(R);\n  }), [R, f]);\n  const q = E.isValidElement(s) ? E.cloneElement(s, {\n    style: {\n      ...s.props.style ?? {},\n      transform: P,\n      willChange: f ? \"auto\" : \"transform\",\n      transition: k\n    },\n    ref: $\n  }) : null;\n  return /* @__PURE__ */ E.createElement(\"div\", { ref: j, style: {\n    overflow: r ? \"visible\" : \"hidden\"\n  }, __self: void 0, __source: {\n    fileName: J,\n    lineNumber: 111,\n    columnNumber: 5\n  } }, q);\n};\nexport {\n  X as default\n};\n"],
  "mappings": "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",
  "names": ["a", "M", "L", "u", "E"]
}
